import { FileTree, Tabs, Steps } from 'nextra/components';
import SQLiteConditions from "./sqlite/conditions.mdx";
import SQLitePatients from "./sqlite/patients.mdx";
import SQLiteEncounters from "./sqlite/encounters.mdx";

# Google Sheets Integration
This example shows a potential sql-on-fhir integration with Google Sheets using Medfetch.js.

## Prerequisites
Let's assume you are interested in sending SQL-on-FHIR queries made with Medfetch.js into your
Google Sheets for some data analysis. In this example, we will be performing the analysis on
patients who underwent *any* treatment for acute bronchitis from 2000-2021 inclusive.
We will also assume the primary coding system our FHIR server uses is [SNOMED CT]().

With that out of the way, let's get right into it!

## The Queries
These certainly aren't the only ways to get the same result, so treat these as just
one possibility out of many.

### Conditions
Here is how we can get all [Condition]() resources
that have an entry in their `code` property that equals the SNOMED code for
acute bronchitis (10509002).

<Tabs items={["sqlite", "postgresql", "mysql", "in-memory"]}>

  <Tabs.Tab>
    <SQLiteConditions />
  </Tabs.Tab>

  <Tabs.Tab></Tabs.Tab>
  <Tabs.Tab></Tabs.Tab>
  <Tabs.Tab></Tabs.Tab>
</Tabs>

### Patients
Next let's get all the patients with the corresponding IDs.

<Tabs items={["sqlite", "postgresql", "mysql", "in-memory"]}>

  <Tabs.Tab>
    <SQLitePatients />
  </Tabs.Tab>

  <Tabs.Tab></Tabs.Tab>
  <Tabs.Tab></Tabs.Tab>
  <Tabs.Tab></Tabs.Tab>
</Tabs>

### Encounters
Next, we'll grab all the [Encounter]() rows who reference a Patient
in our `abc_patients` table.

<Tabs items={["sqlite", "postgresql", "mysql", "in-memory"]}>

  <Tabs.Tab>
    <SQLiteEncounters />
  </Tabs.Tab>

  <Tabs.Tab></Tabs.Tab>
  <Tabs.Tab></Tabs.Tab>
  <Tabs.Tab></Tabs.Tab>
</Tabs>

### Procedures
Then we'll get all [Procedure]() rows that reference this [Encounter]()
in its `encounter` row.
