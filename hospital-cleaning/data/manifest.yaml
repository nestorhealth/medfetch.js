version: "1.0.0"
resources:
  - resourceType: "Patient"
    table: "patients"
    idColumn: "id"
    fieldMappings:
      id: "id"
      first_name: "name[0].given[0]"
      last_name: "name[0].family"
      gender: "gender"
      birth_date: "birthDate"
      address_line1: "address[0].line[0]"
      city: "address[0].city"
      state: "address[0].state"
      zip: "address[0].postalCode"
      phone: "telecom.where(system='phone').value"
      email: "telecom.where(system='email').value"
      marital_status: "maritalStatus.coding[0].code"
      race: "extension.where(url='http://hl7.org/fhir/us/core/StructureDefinition/us-core-race').extension.where(url='text').value"
      ethnicity: "extension.where(url='http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity').extension.where(url='text').value"

  - resourceType: "Procedure"
    table: "procedures"
    idColumn: "id"
    fieldMappings:
      id: "id"
      patient_id: "subject.reference"
      code: "code.coding[0].code"
      status: "status"
      performed_date: "performedDateTime"
      notes: "note[0].text"
      category: "category[0].coding[0].code"
      outcome: "outcome.coding[0].code" 